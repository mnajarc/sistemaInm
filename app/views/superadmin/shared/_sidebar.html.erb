<nav class="superadmin-sidebar py-3">
  <div class="text-center mb-4">
    <i class="bi bi-shield-lock fs-1 text-warning"></i>
    <h5 class="text-warning mt-2">SuperAdmin</h5>
    <hr class="text-light">
  </div>
  <ul class="nav flex-column">
    <% MenuItem.main_navigation(current_user).each do |menu| %>
      <% children = menu.accessible_children_for_user(current_user) %>
      <% if children.any? %>
        <li class="nav-item mb-2">
          <a class="nav-link text-light fw-bold" data-bs-toggle="collapse" href="#sidebar-menu-<%= menu.id %>">
            <i class="bi <%= menu.icon %>"></i> <%= menu.display_name %>
            <i class="bi bi-chevron-down float-end"></i>
          </a>
          <div class="collapse ps-2 show" id="sidebar-menu-<%= menu.id %>">
            <ul class="nav flex-column">
              <% children.each do |child| %>
                <li class="nav-item mb-1">
                  <%= link_to(child.display_name, (child.path.presence || "#"), class: "nav-link text-light ps-4 fw-normal" + (current_page?(child.path) ? " active" : "")) %>
                </li>
              <% end %>
            </ul>
          </div>
        </li>
      <% else %>
        <li class="nav-item mb-2">
          <%= link_to(menu.display_name, (menu.path.presence || "#"), class: "nav-link text-light fw-bold" + (current_page?(menu.path) ? " active" : "")) %>
        </li>
      <% end %>
    <% end %>
    <li><hr class="text-secondary"></li>
    <li class="nav-item">
      <%= link_to root_path, class: "nav-link text-muted" do %>
        <i class="bi bi-arrow-left"></i> Volver al Sistema
      <% end %>
    </li>
  </ul>
  <div class="mt-auto pt-3">
    <small class="text-muted">
      <i class="bi bi-person-circle"></i> <%= current_user.email %><br>
      <i class="bi bi-clock"></i> <%= Time.current.strftime("%d/%m/%Y %H:%M") %>
    </small>
  </div>
</nav>
